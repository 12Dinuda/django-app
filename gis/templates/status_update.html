<!DOCTYPE html>
<html>
<head>
  <title>Status Update</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f1f1f1;
      margin: 0;
      padding: 8px;
    }

    h1 {
      font-size: 20px;
      text-align: center;
      color: #3453ed; /* Blue color for the heading */
    }

    .container {
      display: flex;
      max-width: 1200px; /* Increase the width to 1.5 times its current size */
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, .1);
      margin: 0 auto; /* Center the form on the page */
    }

    .column1 {
      flex: 1;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
    }

    .form-group {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }

    .form-group label {
      font-weight: bold;
      font-size: 14px;
      color: #0b0b0b; /* Blue color for labels */
      margin-right: 10px; /* Add some spacing between the label and value */
    }

    .form-group .value {
      display: flex;
      align-items: center;
    }

    .form-group .value span {
      margin-right: 10px; /* Add some spacing between the value and link */
      color: #000; /* Black text color for values */
    }

    .form-group .value input {
      /* Input-like box style */
      padding: 3px 6px; /* Reduce size by 25% */
      border: 1px solid #ccc;
      border-radius: 5px;
      color: #000; /* Black text color for input values */
    }

    .form-group .value a {
      color: #3453ed; /* Blue color for update details link */
      cursor: pointer;
      text-decoration: none;
    }

    .form-group input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .column2 {
      flex: 1;
      background-color: #f5f5f5;
      padding: 20px;
      border-radius: 8px;
    }

    .column2 img {
      max-width: 100%;
      border-radius: 8px;
    }

    .column2 .image-name {
      margin-top: 10px;
      text-align: center;
    }

    .column2 .update-image-link {
      margin-top: 10px;
      text-align: center;
    }

    .column2 .update-image-link a {
      color: #3453ed;
      text-decoration: none;
    }

    .column2 video {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 20px;
    }

    .column2 .video-name {
      margin-top: 10px;
      text-align: center;
    }

    .column2 .update-video-link {
      margin-top: 10px;
      text-align: center;
    }

    .column2 .update-video-link a {
      color: #3453ed;
      text-decoration: none;
    }

    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      z-index: 1000;
    }

    .popup h2 {
      margin-top: 0;
    }

    .close-icon {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 18px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Status Update</h1>
  <div class="container">
    <div class="column1">
      <div class="form-group">
        <label for="unique_id">Unique ID:</label>
        <div class="value">
          <input type="text" value="{{ unique_id }}" readonly>
          <a onclick="openPopup('unique_id')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="surveyor_id">Surveyor ID:</label>
        <div class="value">
          <input type="text" value="{{ surveyor_id }}" readonly>
          <a onclick="openPopup('surveyor_id')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="coordinates">Coordinates:</label>
        <div class="value">
          <input type="text" value="{{ coordinates }}" readonly>
          <a onclick="openPopup('coordinates')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="nearby_station">Nearby Station:</label>
        <div class="value">
          <input type="text" value="{{ nearby_station }}" readonly>
          <a onclick="openPopup('nearby_station')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="scrap_location">Scrap Location:</label>
        <div class="value">
          <input type="text" value="{{ scrap_location }}" readonly>
          <a onclick="openPopup('scrap_location')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="scrap_category">Scrap Category:</label>
        <div class="value">
          <input type="text" value="{{ scrap_category }}" readonly>
          <a onclick="openPopup('scrap_category')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="sub_category">Sub Category:</label>
        <div class="value">
          <input type="text" value="{{ sub_category }}" readonly>
          <a onclick="openPopup('sub_category')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="scrap_status">Scrap Status:</label>
        <div class="value">
          <input type="text" value="{{ scrap_status }}" readonly>
          <a onclick="openPopup('scrap_status')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="verified_scrap">Verified Scrap:</label>
        <div class="value">
          <input type="text" value="{{ verified_scrap }}" readonly>
          <a onclick="openPopup('verified_scrap')">Update Details</a>
        </div>
      </div>
       <div class="form-group">
        <label for="pending_department">Pending Department:</label>
        <div class="value">
          <input type="text" value="{{ pending_department }}" readonly>
          <a onclick="openPopup('pending_department')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="custodian">Custodian:</label>
        <div class="value">
          <input type="text" value="{{ custodian }}" readonly>
          <a onclick="openPopup('custodian')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="custodian_contact">Custodian Contact:</label>
        <div class="value">
          <input type="text" value="{{ custodian_contact }}" readonly>
          <a onclick="openPopup('custodian_contact')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="approx_weight">Approximate Weight:</label>
        <div class="value">
          <input type="text" value="{{ approx_weight }}" readonly>
          <a onclick="openPopup('approx_weight')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="approx_rate">Approximate Rate:</label>
        <div class="value">
          <input type="text" value="{{ approx_rate }}" readonly>
          <a onclick="openPopup('approx_rate')">Update Details</a>
        </div>
      </div>
      <div class="form-group">
        <label for="remarks">Remarks:</label>
        <div class="value">
          <input type="text" value="{{ remarks }}" readonly>
          <a onclick="openPopup('remarks')">Update Details</a>
        </div>
      </div>


    <!-- Image and Video sections -->
    {% load static %}
    <!-- Image and Video sections -->
    </div>
    <div class="column2">
        <!-- Image Section -->
        {% for image_url in image_urls|slice:":4" %}
            <img src="{% static image_url %}" alt="Image" width="100" height="100"><br>
            <!-- You can add additional HTML here for each image if needed -->
        {% endfor %}
        <div class="update-image-link">
            <a href="#" onclick="openImagePopup()">Update Image</a>
        </div>
    </div>


      <!-- Video Section -->
      <!--<video controls>
        <source src="data:video/mp4;base64,{{ entry.videos }}" type="video/mp4">

      </video>


<!-- Update Details Popup -->
<div class="popup" id="updatePopup">
  <span class="close-icon" onclick="closePopup()">&times;</span>
  <h2 id="popupFieldTitle">Update Data</h2>
  <div class="form-group">
    <div class="value">
      <input type="text" id="field1" placeholder="Updated Data">
    </div>
  </div>
  <div class="submit-group">
    <button class="ok-button" onclick="submitUpdatedData('{{ navigation_entry.id }}')">OK</button>
  </div>
</div>


 <!-- Update Image Popup -->
 <div class="popup" id="updateImagePopup">
  <span class="close-icon" onclick="closeImagePopup()">&times;</span>
  <h2>Update Image</h2>
  <div class="form-group">
    <div class="value">
      <input type="file" id="updateImageInput" accept="image/*">
    </div>
  </div>
  <div class="submit-group">
    <button class="ok-button" onclick="submitUpdatedImage()">OK</button>
  </div>
</div>

<!-- Update Video Popup -->
 <div class="popup" id="updateVideoPopup">
  <span class="close-icon" onclick="closeVideoPopup()">&times;</span>
  <h2>Update Video</h2>
  <div class="form-group">
    <div class="value">
      <input type="file" id="updateVideoInput" accept="video/*">
    </div>
  </div>
  <div class="submit-group">
    <button class="ok-button" onclick="submitUpdatedVideo()">OK</button>
  </div>
</div>


<script>
  function openPopup(field) {
    var popup = document.getElementById('updatePopup');
    var popupFieldTitle = document.getElementById('popupFieldTitle');

    // Update the title of the popup based on the field parameter
    switch (field) {
      case 'unique_id':
        popupFieldTitle.textContent = 'Unique ID Update';
        break;
      case 'surveyor_id':
        popupFieldTitle.textContent = 'Surveyor ID Update';
        break
      case 'coordinates':
        popupFieldTitle.textContent = 'Coordinates Update';
        break;
      case 'nearby_station':
        popupFieldTitle.textContent = 'Nearby Station Update';
        break;
      case 'scrap_location':
        popupFieldTitle.textContent = 'Scrap Location Update';
        break;
      case 'scrap_category':
        popupFieldTitle.textContent = 'Scrap Category Update';
        break;
      case 'sub_category':
        popupFieldTitle.textContent = 'Sub Category Update';
        break;
      case 'scrap_status':
        popupFieldTitle.textContent = 'Scrap Status Update';
        break;
      case 'verified_scrap':
        popupFieldTitle.textContent = 'Verified Scrap Update';
        break;
      case 'pending_department':
        popupFieldTitle.textContent = 'Pending Department Update';
        break;
      case 'custodian':
        popupFieldTitle.textContent = 'Custodian Update';
        break;
      case 'custodian_contact':
        popupFieldTitle.textContent = 'Custodian Contact Update';
        break;
      case 'approx_weight':
        popupFieldTitle.textContent = 'Approximate Weight Update';
        break;
      case 'approx_rate':
        popupFieldTitle.textContent = 'Approximate Rate Update';
        break;
      case 'remarks':
        popupFieldTitle.textContent = 'Remarks Update';
        break;
      default:
        popupFieldTitle.textContent = 'Update Data';
        break;
    }


    popup.style.display = 'block';
  }

  function closePopup() {
    var popup = document.getElementById('updatePopup');
    popup.style.display = 'none';
  }

  // New functions for image update pop-up
  function openImagePopup() {
    var imagePopup = document.getElementById('updateImagePopup');
    imagePopup.style.display = 'block';
  }

  function closeImagePopup() {
    var imagePopup = document.getElementById('updateImagePopup');
    imagePopup.style.display = 'none';
  }

  // New function for submitting updated image
  function submitUpdatedImage() {
    var updatedImageInput = document.getElementById('updateImageInput');
    var updatedImage = updatedImageInput.files[0];

    // Here you can handle the image update, for example, uploading it to a server or saving it locally.
    // You can use JavaScript fetch or XMLHttpRequest to send the image data to the server.

    // After handling the image update, you can close the pop-up.
    closeImagePopup();
  }
  // New function for submitting updated data
  function submitUpdatedData(navigationEntryId) {
   var updatedDataInput = document.getElementById('field1');
   var updatedData = updatedDataInput.value;

   // Send an AJAX request to the server to update the data
   var xhr = new XMLHttpRequest();
   xhr.open('POST', `/update-navigation-entry/${navigationEntryId}/`, true);
   xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
   xhr.onreadystatechange = function () {
    if (xhr.readyState === 4) {
      console.log(xhr.status); // Log the HTTP status code
      console.log(xhr.responseText); // Log the response from the server

      if (xhr.status === 200) {
        // Data updated successfully, you can display a success message to the user
        alert('Data updated successfully');
      } else {
      // Error occurred, handle it accordingly
      alert('Error updating data');
      }
      // Close the pop-up
      closePopup();
    }
   };

   // Prepare the data to send in the request
   var data = `updated_data=${encodeURIComponent(updatedData)}`;
   xhr.send(data);
 }
</script>
</body>
</html>
